{"version":3,"names":["scopedPackagePattern","RegExp","builtins","require","blacklist","validate","module","exports","name","warnings","errors","push","done","undefined","length","match","trim","forEach","blacklistedName","toLowerCase","builtin","test","split","slice","encodeURIComponent","nameMatch","user","pkg","result","validForNewPackages","validForOldPackages"],"sources":["index.js"],"sourcesContent":["'use strict'\n\nvar scopedPackagePattern = new RegExp('^(?:@([^/]+?)[/])?([^/]+?)$')\nvar builtins = require('builtins')\nvar blacklist = [\n  'node_modules',\n  'favicon.ico'\n]\n\nvar validate = module.exports = function (name) {\n  var warnings = []\n  var errors = []\n\n  if (name === null) {\n    errors.push('name cannot be null')\n    return done(warnings, errors)\n  }\n\n  if (name === undefined) {\n    errors.push('name cannot be undefined')\n    return done(warnings, errors)\n  }\n\n  if (typeof name !== 'string') {\n    errors.push('name must be a string')\n    return done(warnings, errors)\n  }\n\n  if (!name.length) {\n    errors.push('name length must be greater than zero')\n  }\n\n  if (name.match(/^\\./)) {\n    errors.push('name cannot start with a period')\n  }\n\n  if (name.match(/^_/)) {\n    errors.push('name cannot start with an underscore')\n  }\n\n  if (name.trim() !== name) {\n    errors.push('name cannot contain leading or trailing spaces')\n  }\n\n  // No funny business\n  blacklist.forEach(function (blacklistedName) {\n    if (name.toLowerCase() === blacklistedName) {\n      errors.push(blacklistedName + ' is a blacklisted name')\n    }\n  })\n\n  // Generate warnings for stuff that used to be allowed\n\n  // core module names like http, events, util, etc\n  builtins.forEach(function (builtin) {\n    if (name.toLowerCase() === builtin) {\n      warnings.push(builtin + ' is a core module name')\n    }\n  })\n\n  // really-long-package-names-------------------------------such--length-----many---wow\n  // the thisisareallyreallylongpackagenameitshouldpublishdowenowhavealimittothelengthofpackagenames-poch.\n  if (name.length > 214) {\n    warnings.push('name can no longer contain more than 214 characters')\n  }\n\n  // mIxeD CaSe nAMEs\n  if (name.toLowerCase() !== name) {\n    warnings.push('name can no longer contain capital letters')\n  }\n\n  if (/[~'!()*]/.test(name.split('/').slice(-1)[0])) {\n    warnings.push('name can no longer contain special characters (\"~\\'!()*\")')\n  }\n\n  if (encodeURIComponent(name) !== name) {\n    // Maybe it's a scoped package name, like @user/package\n    var nameMatch = name.match(scopedPackagePattern)\n    if (nameMatch) {\n      var user = nameMatch[1]\n      var pkg = nameMatch[2]\n      if (encodeURIComponent(user) === user && encodeURIComponent(pkg) === pkg) {\n        return done(warnings, errors)\n      }\n    }\n\n    errors.push('name can only contain URL-friendly characters')\n  }\n\n  return done(warnings, errors)\n}\n\nvalidate.scopedPackagePattern = scopedPackagePattern\n\nvar done = function (warnings, errors) {\n  var result = {\n    validForNewPackages: errors.length === 0 && warnings.length === 0,\n    validForOldPackages: errors.length === 0,\n    warnings: warnings,\n    errors: errors\n  }\n  if (!result.warnings.length) delete result.warnings\n  if (!result.errors.length) delete result.errors\n  return result\n}\n"],"mappings":"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"}