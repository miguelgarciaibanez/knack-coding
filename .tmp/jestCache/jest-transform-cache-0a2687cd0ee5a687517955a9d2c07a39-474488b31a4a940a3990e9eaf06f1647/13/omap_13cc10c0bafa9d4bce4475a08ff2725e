222ab785d9faa9dc307e9669ba15a969
'use strict';

var Type = require('../type');
var _hasOwnProperty = Object.prototype.hasOwnProperty;
var _toString = Object.prototype.toString;
function resolveYamlOmap(data) {
  if (data === null) return true;
  var objectKeys = [],
    index,
    length,
    pair,
    pairKey,
    pairHasKey,
    object = data;
  for (index = 0, length = object.length; index < length; index += 1) {
    pair = object[index];
    pairHasKey = false;
    if (_toString.call(pair) !== '[object Object]') return false;
    for (pairKey in pair) {
      if (_hasOwnProperty.call(pair, pairKey)) {
        if (!pairHasKey) pairHasKey = true;else return false;
      }
    }
    if (!pairHasKey) return false;
    if (objectKeys.indexOf(pairKey) === -1) objectKeys.push(pairKey);else return false;
  }
  return true;
}
function constructYamlOmap(data) {
  return data !== null ? data : [];
}
module.exports = new Type('tag:yaml.org,2002:omap', {
  kind: 'sequence',
  resolve: resolveYamlOmap,
  construct: constructYamlOmap
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJUeXBlIiwicmVxdWlyZSIsIl9oYXNPd25Qcm9wZXJ0eSIsIk9iamVjdCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiX3RvU3RyaW5nIiwidG9TdHJpbmciLCJyZXNvbHZlWWFtbE9tYXAiLCJkYXRhIiwib2JqZWN0S2V5cyIsImluZGV4IiwibGVuZ3RoIiwicGFpciIsInBhaXJLZXkiLCJwYWlySGFzS2V5Iiwib2JqZWN0IiwiY2FsbCIsImluZGV4T2YiLCJwdXNoIiwiY29uc3RydWN0WWFtbE9tYXAiLCJtb2R1bGUiLCJleHBvcnRzIiwia2luZCIsInJlc29sdmUiLCJjb25zdHJ1Y3QiXSwic291cmNlcyI6WyJvbWFwLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxudmFyIFR5cGUgPSByZXF1aXJlKCcuLi90eXBlJyk7XG5cbnZhciBfaGFzT3duUHJvcGVydHkgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xudmFyIF90b1N0cmluZyAgICAgICA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7XG5cbmZ1bmN0aW9uIHJlc29sdmVZYW1sT21hcChkYXRhKSB7XG4gIGlmIChkYXRhID09PSBudWxsKSByZXR1cm4gdHJ1ZTtcblxuICB2YXIgb2JqZWN0S2V5cyA9IFtdLCBpbmRleCwgbGVuZ3RoLCBwYWlyLCBwYWlyS2V5LCBwYWlySGFzS2V5LFxuICAgICAgb2JqZWN0ID0gZGF0YTtcblxuICBmb3IgKGluZGV4ID0gMCwgbGVuZ3RoID0gb2JqZWN0Lmxlbmd0aDsgaW5kZXggPCBsZW5ndGg7IGluZGV4ICs9IDEpIHtcbiAgICBwYWlyID0gb2JqZWN0W2luZGV4XTtcbiAgICBwYWlySGFzS2V5ID0gZmFsc2U7XG5cbiAgICBpZiAoX3RvU3RyaW5nLmNhbGwocGFpcikgIT09ICdbb2JqZWN0IE9iamVjdF0nKSByZXR1cm4gZmFsc2U7XG5cbiAgICBmb3IgKHBhaXJLZXkgaW4gcGFpcikge1xuICAgICAgaWYgKF9oYXNPd25Qcm9wZXJ0eS5jYWxsKHBhaXIsIHBhaXJLZXkpKSB7XG4gICAgICAgIGlmICghcGFpckhhc0tleSkgcGFpckhhc0tleSA9IHRydWU7XG4gICAgICAgIGVsc2UgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICghcGFpckhhc0tleSkgcmV0dXJuIGZhbHNlO1xuXG4gICAgaWYgKG9iamVjdEtleXMuaW5kZXhPZihwYWlyS2V5KSA9PT0gLTEpIG9iamVjdEtleXMucHVzaChwYWlyS2V5KTtcbiAgICBlbHNlIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiBjb25zdHJ1Y3RZYW1sT21hcChkYXRhKSB7XG4gIHJldHVybiBkYXRhICE9PSBudWxsID8gZGF0YSA6IFtdO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IG5ldyBUeXBlKCd0YWc6eWFtbC5vcmcsMjAwMjpvbWFwJywge1xuICBraW5kOiAnc2VxdWVuY2UnLFxuICByZXNvbHZlOiByZXNvbHZlWWFtbE9tYXAsXG4gIGNvbnN0cnVjdDogY29uc3RydWN0WWFtbE9tYXBcbn0pO1xuIl0sIm1hcHBpbmdzIjoiQUFBQSxZQUFZOztBQUVaLElBQUlBLElBQUksR0FBR0MsT0FBTyxDQUFDLFNBQVMsQ0FBQztBQUU3QixJQUFJQyxlQUFlLEdBQUdDLE1BQU0sQ0FBQ0MsU0FBUyxDQUFDQyxjQUFjO0FBQ3JELElBQUlDLFNBQVMsR0FBU0gsTUFBTSxDQUFDQyxTQUFTLENBQUNHLFFBQVE7QUFFL0MsU0FBU0MsZUFBZUEsQ0FBQ0MsSUFBSSxFQUFFO0VBQzdCLElBQUlBLElBQUksS0FBSyxJQUFJLEVBQUUsT0FBTyxJQUFJO0VBRTlCLElBQUlDLFVBQVUsR0FBRyxFQUFFO0lBQUVDLEtBQUs7SUFBRUMsTUFBTTtJQUFFQyxJQUFJO0lBQUVDLE9BQU87SUFBRUMsVUFBVTtJQUN6REMsTUFBTSxHQUFHUCxJQUFJO0VBRWpCLEtBQUtFLEtBQUssR0FBRyxDQUFDLEVBQUVDLE1BQU0sR0FBR0ksTUFBTSxDQUFDSixNQUFNLEVBQUVELEtBQUssR0FBR0MsTUFBTSxFQUFFRCxLQUFLLElBQUksQ0FBQyxFQUFFO0lBQ2xFRSxJQUFJLEdBQUdHLE1BQU0sQ0FBQ0wsS0FBSyxDQUFDO0lBQ3BCSSxVQUFVLEdBQUcsS0FBSztJQUVsQixJQUFJVCxTQUFTLENBQUNXLElBQUksQ0FBQ0osSUFBSSxDQUFDLEtBQUssaUJBQWlCLEVBQUUsT0FBTyxLQUFLO0lBRTVELEtBQUtDLE9BQU8sSUFBSUQsSUFBSSxFQUFFO01BQ3BCLElBQUlYLGVBQWUsQ0FBQ2UsSUFBSSxDQUFDSixJQUFJLEVBQUVDLE9BQU8sQ0FBQyxFQUFFO1FBQ3ZDLElBQUksQ0FBQ0MsVUFBVSxFQUFFQSxVQUFVLEdBQUcsSUFBSSxDQUFDLEtBQzlCLE9BQU8sS0FBSztNQUNuQjtJQUNGO0lBRUEsSUFBSSxDQUFDQSxVQUFVLEVBQUUsT0FBTyxLQUFLO0lBRTdCLElBQUlMLFVBQVUsQ0FBQ1EsT0FBTyxDQUFDSixPQUFPLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRUosVUFBVSxDQUFDUyxJQUFJLENBQUNMLE9BQU8sQ0FBQyxDQUFDLEtBQzVELE9BQU8sS0FBSztFQUNuQjtFQUVBLE9BQU8sSUFBSTtBQUNiO0FBRUEsU0FBU00saUJBQWlCQSxDQUFDWCxJQUFJLEVBQUU7RUFDL0IsT0FBT0EsSUFBSSxLQUFLLElBQUksR0FBR0EsSUFBSSxHQUFHLEVBQUU7QUFDbEM7QUFFQVksTUFBTSxDQUFDQyxPQUFPLEdBQUcsSUFBSXRCLElBQUksQ0FBQyx3QkFBd0IsRUFBRTtFQUNsRHVCLElBQUksRUFBRSxVQUFVO0VBQ2hCQyxPQUFPLEVBQUVoQixlQUFlO0VBQ3hCaUIsU0FBUyxFQUFFTDtBQUNiLENBQUMsQ0FBQyJ9